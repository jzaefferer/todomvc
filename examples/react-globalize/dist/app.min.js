define("consts",[],function(){return{ALL_TODOS:"all",ACTIVE_TODOS:"active",COMPLETED_TODOS:"completed"}}),define("footer",["./consts","react","react-globalize/message"],function(a,b,c){"use strict";var d=b.createClass({displayName:"TodoFooter",render:function(){var d=null;this.props.completedCount>0&&(d=b.createElement("button",{id:"clear-completed",onClick:this.props.onClearCompleted},b.createElement(c,null,"Clear completed")));var e=b.addons.classSet,f=this.props.nowShowing;return b.createElement("footer",{id:"footer"},b.createElement("span",{id:"todo-count"},b.createElement(c,{variables:{count:this.props.count}},"{count, plural,\n   one {# item left}\n other {# items left}\n}")),b.createElement("ul",{id:"filters"},b.createElement("li",null,b.createElement("a",{href:"#/",className:e({selected:f===a.ALL_TODOS})},b.createElement(c,null,"All")))," ",b.createElement("li",null,b.createElement("a",{href:"#/active",className:e({selected:f===a.ACTIVE_TODOS})},b.createElement(c,null,"Active")))," ",b.createElement("li",null,b.createElement("a",{href:"#/completed",className:e({selected:f===a.COMPLETED_TODOS})},b.createElement(c,null,"Completed")))),d)}});return d}),define("todoItem",["react"],function(a){"use strict";var b=27,c=13,d=a.createClass({displayName:"TodoItem",handleSubmit:function(){var a=this.state.editText.trim();a?(this.props.onSave(a),this.setState({editText:a})):this.props.onDestroy()},handleEdit:function(){this.props.onEdit(),this.setState({editText:this.props.todo.title})},handleKeyDown:function(a){a.which===b?(this.setState({editText:this.props.todo.title}),this.props.onCancel(a)):a.which===c&&this.handleSubmit(a)},handleChange:function(a){this.setState({editText:a.target.value})},getInitialState:function(){return{editText:this.props.todo.title}},shouldComponentUpdate:function(a,b){return a.todo!==this.props.todo||a.editing!==this.props.editing||b.editText!==this.state.editText},componentDidUpdate:function(a){if(!a.editing&&this.props.editing){var b=this.refs.editField.getDOMNode();b.focus(),b.setSelectionRange(b.value.length,b.value.length)}},render:function(){return a.createElement("li",{className:a.addons.classSet({completed:this.props.todo.completed,editing:this.props.editing})},a.createElement("div",{className:"view"},a.createElement("input",{className:"toggle",type:"checkbox",checked:this.props.todo.completed,onChange:this.props.onToggle}),a.createElement("label",{onDoubleClick:this.handleEdit},this.props.todo.title),a.createElement("button",{className:"destroy",onClick:this.props.onDestroy})),a.createElement("input",{ref:"editField",className:"edit",value:this.state.editText,onBlur:this.handleSubmit,onChange:this.handleChange,onKeyDown:this.handleKeyDown}))}});return d}),function(){"use strict";function a(){"tastejs.github.io"===location.hostname&&(location.href=location.href.replace("tastejs.github.io/todomvc","todomvc.com"))}function b(){var a=location.href.indexOf("examples/");return location.href.substr(0,a)}function c(a,c){if(!location.host)return console.info("Miss the info bar? Run TodoMVC from a server to avoid a cross-origin error.");var d=new XMLHttpRequest;d.open("GET",b()+a,!0),d.send(),d.onload=function(){200===d.status&&c&&c(d.responseText)}}function d(a,b){if(!(this instanceof d))return new d(a,b);var c,e;if("object"!=typeof a)try{a=JSON.parse(a)}catch(f){return}b&&(c=b.template,e=b.framework),!c&&a.templates&&(c=a.templates.todomvc),!e&&document.querySelector("[data-framework]")&&(e=document.querySelector("[data-framework]").dataset.framework),this.template=c,a.backend?(this.frameworkJSON=a.backend,this.frameworkJSON.issueLabel=e,this.append({backend:!0})):a[e]&&(this.frameworkJSON=a[e],this.frameworkJSON.issueLabel=e,this.append()),this.fetchIssueCount()}var e=function(a){a.defaults=function(a){if(!a)return a;for(var b=1,c=arguments.length;c>b;b++){var d=arguments[b];if(d)for(var e in d)null==a[e]&&(a[e]=d[e])}return a},a.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var b=/(.)^/,c={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},d=/\\|'|\r|\n|\t|\u2028|\u2029/g;return a.template=function(e,f,g){var h;g=a.defaults({},g,a.templateSettings);var i=new RegExp([(g.escape||b).source,(g.interpolate||b).source,(g.evaluate||b).source].join("|")+"|$","g"),j=0,k="__p+='";e.replace(i,function(a,b,f,g,h){return k+=e.slice(j,h).replace(d,function(a){return"\\"+c[a]}),b&&(k+="'+\n((__t=("+b+"))==null?'':_.escape(__t))+\n'"),f&&(k+="'+\n((__t=("+f+"))==null?'':__t)+\n'"),g&&(k+="';\n"+g+"\n__p+='"),j=h+a.length,a}),k+="';\n",g.variable||(k="with(obj||{}){\n"+k+"}\n"),k="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+k+"return __p;\n";try{h=new Function(g.variable||"obj","_",k)}catch(l){throw l.source=k,l}if(f)return h(f,a);var m=function(b){return h.call(this,b,a)};return m.source="function("+(g.variable||"obj")+"){\n"+k+"}",m},a}({});"todomvc.com"===location.hostname&&(!function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-31081062-1","auto"),ga("send","pageview")),d.prototype.append=function(a){var c=document.createElement("aside");if(c.innerHTML=e.template(this.template,this.frameworkJSON),c.className="learn",a&&a.backend){var d=c.querySelector(".source-links"),f=d.firstElementChild,g=d.lastElementChild,h=g.getAttribute("href");g.setAttribute("href",h.substr(h.lastIndexOf("http"))),d.innerHTML=f.outerHTML+g.outerHTML}else{var i=c.querySelectorAll(".demo-link");Array.prototype.forEach.call(i,function(a){"http"!==a.getAttribute("href").substr(0,4)&&a.setAttribute("href",b()+a.getAttribute("href"))})}document.body.className=(document.body.className+" learn-bar").trim(),document.body.insertAdjacentHTML("afterBegin",c.outerHTML)},d.prototype.fetchIssueCount=function(){var a=document.getElementById("issue-count-link");if(a){var b=a.href.replace("https://github.com","https://api.github.com/repos"),c=new XMLHttpRequest;c.open("GET",b,!0),c.onload=function(b){var c=JSON.parse(b.target.responseText);if(c instanceof Array){var d=c.length;0!==d&&(a.innerHTML="This app has "+d+" open issues",document.getElementById("issue-count").style.display="inline")}},c.send()}},a(),c("learn.json",d)}(),define("todomvc-common/base",{}),define("app",["./consts","director","globalize-runtime","./footer","./todoItem","react","react-globalize/message","todomvc-common/base"],function(a,b,c,d,e,f,g){"use strict";var h=13,i=f.createClass({displayName:"TodoApp",getInitialState:function(){return{nowShowing:a.ALL_TODOS,editing:null}},componentDidMount:function(){var c=this.setState,d=b({"/":c.bind(this,{nowShowing:a.ALL_TODOS}),"/active":c.bind(this,{nowShowing:a.ACTIVE_TODOS}),"/completed":c.bind(this,{nowShowing:a.COMPLETED_TODOS})});d.init("/")},handleNewTodoKeyDown:function(a){if(a.which===h){a.preventDefault();var b=this.refs.newField.getDOMNode().value.trim();b&&(this.props.model.addTodo(b),this.refs.newField.getDOMNode().value="")}},toggleAll:function(a){var b=a.target.checked;this.props.model.toggleAll(b)},toggle:function(a){this.props.model.toggle(a)},destroy:function(a){this.props.model.destroy(a)},edit:function(a){this.setState({editing:a.id})},save:function(a,b){this.props.model.save(a,b),this.setState({editing:null})},cancel:function(){this.setState({editing:null})},clearCompleted:function(){this.props.model.clearCompleted()},render:function(){var b,h,i=this.props.model.todos,j=i.filter(function(b){switch(this.state.nowShowing){case a.ACTIVE_TODOS:return!b.completed;case a.COMPLETED_TODOS:return b.completed;default:return!0}},this),k=j.map(function(a){return f.createElement(e,{key:a.id,todo:a,onToggle:this.toggle.bind(this,a),onDestroy:this.destroy.bind(this,a),onEdit:this.edit.bind(this,a),editing:this.state.editing===a.id,onSave:this.save.bind(this,a),onCancel:this.cancel})},this),l=i.reduce(function(a,b){return b.completed?a:a+1},0),m=i.length-l;return(l||m)&&(b=f.createElement(d,{count:l,completedCount:m,nowShowing:this.state.nowShowing,onClearCompleted:this.clearCompleted})),i.length&&(h=f.createElement("section",{id:"main"},f.createElement("input",{id:"toggle-all",type:"checkbox",onChange:this.toggleAll,checked:0===l}),f.createElement("ul",{id:"todo-list"},k))),f.createElement("div",null,f.createElement("header",{id:"header"},f.createElement("h1",null,f.createElement(g,null,"todos")),f.createElement("input",{ref:"newField",id:"new-todo",placeholder:c.formatMessage("What needs to be done?"),onKeyDown:this.handleNewTodoKeyDown,autoFocus:!0})),h,b)}});return i}),define("info",["globalize-runtime","react","react-globalize/message"],function(a,b,c){"use strict";var d=b.createClass({displayName:"Info",render:function(){return b.createElement("div",null,b.createElement("p",null,b.createElement(c,null,"Double-click to edit a todo")),b.createElement("p",null,b.createElement(c,{elements:{petehunt:b.createElement("a",{href:"http://github.com/petehunt/"},"petehunt"),rxaviers:b.createElement("a",{href:"http://github.com/rxaviers/"},"rxaviers")}},"Created by [petehunt/] (React) and [rxaviers/] (Globalize)")),b.createElement("p",null,b.createElement(c,{elements:{TodoMVC:b.createElement("a",{href:"http://todomvc.com"},"TodoMVC")}},"Part of [TodoMVC/]")))}});return d}),define("utils",[],function(){"use strict";var a={uuid:function(){var a,b,c="";for(a=0;32>a;a++)b=16*Math.random()|0,(8===a||12===a||16===a||20===a)&&(c+="-"),c+=(12===a?4:16===a?3&b|8:b).toString(16);return c},store:function(a,b){if(b)return localStorage.setItem(a,JSON.stringify(b));var c=localStorage.getItem(a);return c&&JSON.parse(c)||[]},extend:function(){for(var a={},b=0;b<arguments.length;b++){var c=arguments[b];for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}return a}};return a}),define("todoModel",["./utils"],function(a){"use strict";var b=function(b){this.key=b,this.todos=a.store(b),this.onChanges=[]};return b.prototype.subscribe=function(a){this.onChanges.push(a)},b.prototype.inform=function(){a.store(this.key,this.todos),this.onChanges.forEach(function(a){a()})},b.prototype.addTodo=function(b){this.todos=this.todos.concat({id:a.uuid(),title:b,completed:!1}),this.inform()},b.prototype.toggleAll=function(b){this.todos=this.todos.map(function(c){return a.extend({},c,{completed:b})}),this.inform()},b.prototype.toggle=function(b){this.todos=this.todos.map(function(c){return c!==b?c:a.extend({},c,{completed:!c.completed})}),this.inform()},b.prototype.destroy=function(a){this.todos=this.todos.filter(function(b){return b!==a}),this.inform()},b.prototype.save=function(b,c){this.todos=this.todos.map(function(d){return d!==b?d:a.extend({},d,{title:c})}),this.inform()},b.prototype.clearCompleted=function(){this.todos=this.todos.filter(function(a){return!a.completed}),this.inform()},b}),require(["compiled-i18n-data","./app","./info","react","./todoModel"],function(a,b,c,d,e){function f(){d.render(d.createElement(b,{model:g}),document.getElementById("todoapp"))}var g=new e("react-todos");a.locale(document.documentElement.lang),d.render(d.createElement(c),document.getElementById("info")),g.subscribe(f),f()});